@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Segoe UI', 'Segoe UI Web (West European)', -apple-system,
      BlinkMacSystemFont, Roboto, 'Helvetica Neue', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent Edge from showing a blinking text caret on non-editable content */
    caret-color: transparent;
  }

  body {
    @apply bg-white text-fluent-text;
  }

  /* Restore visible caret for actual text inputs */
  input,
  textarea,
  [contenteditable="true"] {
    caret-color: auto;
  }
}

@layer components {
  /* Fluent-style focus ring */
  .fluent-focus {
    @apply outline-none focus-visible:ring-2 focus-visible:ring-fluent-blue focus-visible:ring-offset-1;
  }

  /* Fluent-style button */
  .fluent-btn {
    @apply inline-flex items-center justify-center px-4 py-1.5 text-fluent-base font-semibold
           rounded-sm transition-colors duration-100;
  }

  .fluent-btn-primary {
    @apply fluent-btn bg-fluent-blue text-white hover:bg-fluent-blue-hover active:bg-fluent-blue-pressed;
  }

  .fluent-btn-secondary {
    @apply fluent-btn bg-white text-fluent-text border border-fluent-border-strong
           hover:bg-fluent-bg-alt active:bg-fluent-border;
  }

  /* Fluent-style card */
  .fluent-card {
    @apply bg-white rounded shadow-sm border border-fluent-border;
  }

  /* Category tree item (rendered as <button>) */
  .category-item {
    @apply flex items-center gap-1 px-2 py-1.5 text-fluent-base cursor-pointer select-none
           hover:bg-fluent-bg-alt rounded-sm transition-colors duration-75
           bg-transparent border-0 w-full;
    font: inherit;
    color: inherit;
    text-align: left;
  }

  .category-item-active {
    @apply bg-fluent-light-blue text-fluent-blue font-semibold;
  }

  /* Setting row */
  .setting-row {
    @apply flex items-start md:items-center gap-3 px-4 py-3 border-b border-fluent-border
           hover:bg-fluent-bg transition-colors duration-75 cursor-pointer;
  }

  .setting-row-expanded {
    @apply bg-fluent-bg;
  }

  /* Child setting row — tinted background to differentiate from parent rows */
  .setting-row-child {
    @apply flex items-start md:items-center gap-3 px-3 py-2.5 border-b border-blue-100
           bg-slate-50 hover:bg-blue-50 transition-colors duration-75 cursor-pointer;
  }

  .setting-row-child-expanded {
    @apply bg-blue-50;
  }

  /* Info tooltip icon */
  .info-icon {
    @apply inline-flex items-center justify-center w-5 h-5 rounded-full
           border border-fluent-border-strong text-fluent-text-secondary
           text-fluent-xs hover:bg-fluent-bg-alt cursor-help;
  }

  /* Badge */
  .scope-badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-md text-fluent-xs font-medium;
  }

  /* Search result item */
  .search-result {
    @apply flex flex-col gap-0.5 px-4 py-2 hover:bg-fluent-bg-alt cursor-pointer
           border-b border-fluent-border last:border-b-0;
  }

  /* Scrollbar styling */
  .fluent-scroll {
    scrollbar-width: thin;
    scrollbar-color: #c8c6c4 transparent;
  }

  .fluent-scroll::-webkit-scrollbar {
    width: 6px;
  }

  .fluent-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .fluent-scroll::-webkit-scrollbar-thumb {
    background-color: #c8c6c4;
    border-radius: 3px;
  }

  .fluent-scroll::-webkit-scrollbar-thumb:hover {
    background-color: #a19f9d;
  }
}

/* ── Pre-hydration: hide sidebar on small screens so it doesn't flash open ── */
@media (max-width: 767px) {
  .sidebar-mobile-init {
    display: none !important;
  }
}

/* ── Mobile device touch-target overrides ──
   Applied when the inline detection script sets .mobile-device on <html>,
   OR via CSS media query for coarse-pointer (touch) devices at mobile widths. */
@media (pointer: coarse) and (max-width: 767px) {
  .category-item {
    @apply gap-2 py-3 px-3 text-[15px];
  }

  .info-icon {
    @apply w-7 h-7;
  }

  .setting-expand-btn {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .child-expand-btn {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .child-tree-connector {
    @apply w-6 text-base;
  }

  .setting-row-child {
    @apply gap-2 py-3 px-3;
  }

  .setting-row {
    @apply py-3.5;
  }

  .category-chevron {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .category-chevron svg {
    @apply w-4 h-4;
  }

  .category-chevron-spacer {
    @apply w-8 h-8;
  }

  .search-clear-btn {
    @apply w-8 h-8;
  }

  .platform-filter-btn {
    @apply py-1.5;
  }
}

@media (max-width: 767px) {
html.mobile-device {
  .category-item {
    @apply gap-2 py-3 px-3 text-[15px];
  }

  .info-icon {
    @apply w-7 h-7;
  }

  .setting-expand-btn {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .child-expand-btn {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .child-tree-connector {
    @apply w-6 text-base;
  }

  .setting-row-child {
    @apply gap-2 py-3 px-3;
  }

  .setting-row {
    @apply py-3.5;
  }

  .category-chevron {
    @apply w-8 h-8 rounded-md bg-fluent-bg-alt;
  }

  .category-chevron svg {
    @apply w-4 h-4;
  }

  .category-chevron-spacer {
    @apply w-8 h-8;
  }

  .search-clear-btn {
    @apply w-8 h-8;
  }

  .platform-filter-btn {
    @apply py-1.5;
  }
}
}
